@{
    Layout = "_WelcomeLayout";
    var CarrinhoUrl = Url.Action("Carrinho", "Home");
}

<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Hamburgueria</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
   <link rel="stylesheet" href="@Url.Content("~/css/cardapio.css")">
</head>
<body>
    <header>
    
    </header>
    
    <div class="container">
    
        <nav class="sidebar">
            <ul>
                  @foreach (var category in ViewBag.Categories)
                    {
                        string activeClass = category.active ? "active" : "";
                        <a href="/Cardapio/@category.id" class="category-btn @activeClass">
                            <span class="icon">üçï</span>
                            <span class="label">@category.name</span>
                        </a>
                    }
            </ul>
        </nav>
        
        <main class="content">
        <div class="top-menu-scroll">
           @foreach (var subcategory in ViewBag.SubCategories)
                {
                    string activeClass = subcategory.active ? "active" : "";
                    <a href="/Cardapio/@ViewBag.Category/@subcategory.id" class="subcategory-btn @activeClass">
                        <span class="label">@subcategory.name</span>
                    </a>
                }
        </div>
        
            <div class="produtos">

                  @foreach (var product in ViewBag.Products)
                {
                    <div class="menu-item">
                        <img src="https://fakeimg.pl/60x60/?retina=1&text=%F0%9F%8D%95" alt="@product.name">
                        <div class="options">
                            <h3>@product.name</h3>
                            <p>@product.description</p>

                            <strong>@product.price.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("pt-BR"))</strong>
                        </div>
                    </div>
                }
            </div>

        </main>
    </div>
    
    <footer>
        <div class="footer-info">
            <p>Total de itens: <span id="total-itens">0</span></p>
            <p>Total do pedido: R$ <span id="total-pedido">0</span></p>
        </div>
        <div class="car-cont">
            <span class="car-text">Ver Carrinho</span>
            <button class="btn-car" onclick="redirecionarCarrinho()">
                <i class="fa-solid fa-cart-shopping"></i>
            </button>
        </div>    
        <button class="btn-confirm">Pronto</button>
    </footer>
    

</body>
</html>


<script>
    window.onload = function () {
    const totalItens = sessionStorage.getItem("totalItens") || 0;
    const totalPedido = parseFloat(sessionStorage.getItem("totalPedido") || 0).toFixed(2);

    document.getElementById("total-itens").innerText = totalItens;
    document.getElementById("total-pedido").innerText = totalPedido.replace(".", ",");
};

</script>

<script>

const subcategoriasPorCategoria = {
    lanches: ["vegano", "carne", "frango", "peixe"],
    sobremesas: ["bolos", "tortas", "sorvetes"],
    combos: ["cl√°ssico", "premium"],
    bebidas: ["refrigerante", "suco", "milkshake"],
    extras: ["batata", "onion", "outros"],
    molhos: ["barbecue", "maionese"]
};


    window.onload = function () {
        const totalItens = sessionStorage.getItem("totalItens") || 0;
        const totalPedido = parseFloat(sessionStorage.getItem("totalPedido") || 0).toFixed(2);

        document.getElementById("total-itens").innerText = totalItens;
        document.getElementById("total-pedido").innerText = totalPedido.replace(".", ",");
    };
    </script>

    <script>
document.addEventListener("DOMContentLoaded", function () {
    const botoesFiltroTopo = document.querySelectorAll(".top-filter");
    const botoesFiltroSidebar = document.querySelectorAll(".sidebar button");
    const produtos = document.querySelectorAll(".produto");
    const topMenuScroll = document.querySelector(".top-menu-scroll");

    let filtroPrincipalAtual = "lanches";
    let subFiltroAtual = "todos";

    // Fun√ß√£o para aplicar os filtros
    function aplicarFiltros(categoriaPrincipal, subCategoria = 'todos') {
        produtos.forEach(produto => {
            const catPrincipal = produto.getAttribute('data-categoria-principal');
            const catSub = produto.getAttribute('data-categoria');

            if (categoriaPrincipal === 'lanches') {
                if (catPrincipal === 'lanches' && (subCategoria === 'todos' || catSub === subCategoria)) {
                    produto.style.display = 'block';
                } else {
                    produto.style.display = 'none';
                }
            } else {
                if (catPrincipal === categoriaPrincipal) {
                    produto.style.display = 'ruby';
                } else {
                    produto.style.display = 'none';
                }
            }
        });
    }

    // Ativa os lanches por padr√£o
    aplicarFiltros('lanches', 'todos');
    topMenuScroll.style.display = 'flex';

    // Clique nos filtros principais (lateral)
    botoesFiltroSidebar.forEach(botao => {
        botao.addEventListener('click', function () {
            const filtro = this.getAttribute('data-filter');

            filtroPrincipalAtual = filtro;
            subFiltroAtual = 'todos'; // resetar subfiltro ao mudar de categoria principal

            if (filtro === 'lanches') {
                topMenuScroll.style.display = 'flex';
                aplicarFiltros('lanches', 'todos');
            } else {
                topMenuScroll.style.display = 'none';
                aplicarFiltros(filtro);
            }
        });
    });

    // Clique nos subfiltros de lanches (topo)
    botoesFiltroTopo.forEach(botao => {
        botao.addEventListener('click', function () {
            const sub = this.getAttribute('data-filter');
            subFiltroAtual = sub;

            aplicarFiltros('lanches', sub);
        });
    });
});

// Fun√ß√£o de redirecionamento para o carrinho
function redirecionarCarrinho() {
    window.location.href = "/Home/carrinho";
}
</script>

